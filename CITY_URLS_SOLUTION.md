# Решение проблемы с URL городов (/saratov, /ulyanovsk)

## Проблема

Если физических страниц `/saratov/index.html` и `/ulyanovsk/index.html` нет, то ссылки будут вести на 404 ошибку. Это критично для Яндекс Директ, так как рекламные ссылки должны работать.

## Решения

### ✅ Вариант 1: Настройка сервера через .htaccess (РЕКОМЕНДУЕТСЯ)

Я создал файл `.htaccess`, который автоматически перенаправляет запросы вида:
- `/saratov/index.html` → `/index.html`
- `/ulyanovsk/remont-stiralnoj-mashiny.html` → `/remont-stiralnoj-mashiny.html`

**Как это работает:**
1. Пользователь переходит по ссылке `/saratov/index.html`
2. Сервер (Apache) видит правило в `.htaccess`
3. Сервер отдает файл `/index.html`, но URL остается `/saratov/index.html`
4. JavaScript определяет город из URL и заменяет номера телефонов

**Что нужно сделать:**
1. Убедитесь, что на вашем хостинге включен модуль `mod_rewrite` (обычно включен по умолчанию)
2. Файл `.htaccess` уже создан в корне проекта
3. Если у вас Nginx вместо Apache, нужна другая конфигурация (см. ниже)

**Для Nginx:**
Добавьте в конфигурацию сайта:
```nginx
location ~ ^/(saratov|ulyanovsk)/(.+)$ {
    try_files /$2 =404;
}

location ~ ^/(saratov|ulyanovsk)/?$ {
    rewrite ^/(saratov|ulyanovsk)/?$ /index.html last;
}
```

---

### Вариант 2: JavaScript роутинг (если сервер настроить нельзя)

Если нельзя настроить сервер, можно использовать JavaScript для обработки ссылок:

```javascript
// В script.js уже добавлена обработка кликов
// Но можно раскомментировать и использовать программную навигацию:

document.addEventListener('click', function(e) {
    const link = e.target.closest('a[href]');
    if (!link) return;
    
    const href = link.getAttribute('href');
    const cityMatch = href.match(/^\/(saratov|ulyanovsk)\/(.+)$/);
    
    if (cityMatch) {
        e.preventDefault(); // Отменяем стандартный переход
        const actualPath = cityMatch[2];
        const citySlug = cityMatch[1];
        
        // Сохраняем город
        localStorage.setItem('selectedCity', citySlug);
        
        // Переходим на реальную страницу
        window.location.href = actualPath;
    }
});
```

**Минусы этого подхода:**
- URL меняется на реальный (без префикса города)
- Может быть хуже для SEO
- Яндекс Директ может не засчитать переход правильно

---

### Вариант 3: Создать реальные папки (НЕ РЕКОМЕНДУЕТСЯ)

Можно создать физические папки `/saratov/` и `/ulyanovsk/` с копиями всех файлов, но это:
- Увеличивает размер сайта
- Усложняет поддержку (нужно обновлять файлы в нескольких местах)
- Неэффективно

---

## Рекомендация

**Используйте Вариант 1 (`.htaccess`)** - это стандартное решение для таких задач:
- ✅ Работает с Яндекс Директ
- ✅ URL остаются с префиксом города
- ✅ Не требует дублирования файлов
- ✅ Легко добавить новые города

## Проверка работы

После настройки `.htaccess` проверьте:

1. Откройте в браузере: `http://ваш-сайт.ru/saratov/index.html`
   - Должна открыться главная страница
   - Номера телефонов должны быть для Саратова

2. Откройте: `http://ваш-сайт.ru/ulyanovsk/remont-stiralnoj-mashiny.html`
   - Должна открыться страница ремонта стиральных машин
   - Номера телефонов должны быть для Ульяновска

3. Проверьте консоль браузера (F12) - не должно быть ошибок 404

## Если что-то не работает

1. **Проверьте, включен ли mod_rewrite на хостинге**
   - Обычно включен по умолчанию
   - Если нет - обратитесь в поддержку хостинга

2. **Проверьте права на файл `.htaccess`**
   - Файл должен быть доступен для чтения сервером

3. **Проверьте логи сервера**
   - Могут быть ошибки в конфигурации

4. **Для тестирования локально**
   - Используйте локальный сервер (XAMPP, OpenServer и т.д.)
   - Или используйте простой PHP сервер: `php -S localhost:8000`

